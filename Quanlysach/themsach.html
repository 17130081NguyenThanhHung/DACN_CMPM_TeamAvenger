<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8"/>
    <title>Thêm sách</title>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>
    <link rel="icon" type="image/png" sizes="16x16" href="images/logo.png">
    <link href="/css1/css/material_icon_fonts/material_icon.css" rel="stylesheet" type="text/css"/>
    <link href="/css1/css/bootstrap.css" rel="stylesheet"/>
    <link rel="stylesheet" href="/css1/css/preloader.min.css"/>
    <link href="/css1/css/waves.css" rel="stylesheet" />
    <link href="/css1/css/animate.css" rel="stylesheet" />
    <link href="/css1/css/style.css" rel="stylesheet"/>

      <!-- Bootstrap CSS File -->
    <link href="/lib/bootstrap/css/bootstrap.min.css" rel="stylesheet">

    <!-- ADP Default css styles END-->
    <!-- ADP Custom common css styles -->
    <link href="/css1/css/store.common.style.css" rel="stylesheet"/>
    <link href="/css1/css/store.common.mq.css" rel="stylesheet"/>
    <!-- ADP Custom common css styles END -->
    <link href="/css1/css/all-themes.css" rel="stylesheet" />
    <link rel="stylesheet" type="text/css" href="/css1/css/store.upsertprod.mq.css">
    <link rel="stylesheet" type="text/css" href="/css1/css/store.upsertprod.style.css">
    <link rel="stylesheet" type="text/css" href="/css1/ss/bootstrap.notify.css">
    <link rel="stylesheet" type="text/css" href="/css1/css/bootstrap-select.min.css">
 


      <!-- Libraries CSS Files -->
  <link href="/lib/font-awesome/css/font-awesome.min.css" rel="stylesheet">
  <link href="/lib/animate/animate.min.css" rel="stylesheet">
  <link href="/lib/ionicons/css/ionicons.min.css" rel="stylesheet">
  <link href="/lib/owlcarousel/assets/owl.carousel.min.css" rel="stylesheet">
  <link href="/lib/lightbox/css/lightbox.min.css" rel="stylesheet">

     <!-- Cái này mới thêm cùng với thư mục assets-->
  <!-- Vendor CSS Files -->
  <link href="/css/assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="/css/assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="/css/assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="/css/assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="/css/assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="/css/assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">


    <!-- Jquery Core Js -->
    <script src="/css1/js/jquery.min.js"></script>
    <script src="/css1/js/jquery.slimscroll.js"></script>
    <!-- Bootstrap Core Js -->
    <script src="/css1/js/bootstrap.js"></script>
    <script src="/css1/js/jquery.equalheights.min.js"></script>
    <!-- Waves Effect Plugin Js -->
    <script src="/css1/js/waves.js"></script>
    <script src="/css1/js/admin.js"></script>
    <script src="/css1/js/master.tools.js"></script>
    <script src="/css1/js/master.script.js"></script>
    <script src="/css1/js/jquery.form.min.js"></script>
    <script src="/css1/js/bootstrap-select.js"></script>
    <script src="/css1/js/bootstrap-notify.js"></script>
    <script src="/css1/js/jquery.sticky-sidebar.js"></script>
    <script src="/css1/js/tinymce.min.js"></script>
  

    <link type="text/css" href="/css2/bootstrap.scss.css" rel="stylesheet">
  <link href="/css2/style.css" rel="stylesheet">
  <!-- <link href="/css2/base.scss.css" rel="stylesheet"> -->
  <!-- Main Stylesheet File -->
  <link href="/css/style.css" rel="stylesheet">
  <link rel="stylesheet" href="/css/assets/css/style.css">
  <link rel="stylesheet" href="/fontawesome-free-5.15.3-web/css/all.min.css" />
  
  <script src="/css2/js/jquery.min.js" type="text/javascript"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-form-validator/2.3.26/jquery.form-validator.min.js" type="text/javascript"></script>


      <!-- Contact Form JavaScript File -->
  <script src="/contactform/contactform.js"></script>

     <!-- Template Main Javascript File -->
  <script src="/js/main.js"></script>


    <!-- JavaScript Libraries -->
    <script src="/lib/jquery/jquery.min.js"></script>
    <script src="/lib/jquery/jquery-migrate.min.js"></script>
    <script src="/lib/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="/lib/easing/easing.min.js"></script>
    <script src="/lib/mobile-nav/mobile-nav.js"></script>
    <script src="/lib/wow/wow.min.js"></script>
    <script src="/lib/waypoints/waypoints.min.js"></script>
    <script src="/lib/counterup/counterup.min.js"></script>
    <script src="/lib/owlcarousel/owl.carousel.min.js"></script>
    <script src="/lib/isotope/isotope.pkgd.min.js"></script>
    <script src="/lib/lightbox/js/lightbox.min.js"></script>
</head>
   
   <body>

 <!--==========================
  Header
  ============================-->
  <header id="header" class="fixed-top">
    <div class="container">

      <div class="logo float-left">
        <a href="#intro" class="scrollto"><img src="/img/portfolio/logobookexchange.png" alt="" class="img-fluid"></a>
      
      </div>
      <div class="col-lg-3 col-md-3 add-arrow">
        <form class="search-bar has-validation-callback" action="/search" method="get" role="search">
            <input type="search" name="query" value="" placeholder="Tìm kiếm..." class="input-group-field search-text" autocomplete="off">
            <button class="btn icon-fallback-text" style="position: absolute; top: -6px; left: 0px; padding: 0; margin-left: 2px;">
                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1" x="0px" y="0px" viewBox="0 0 451 451" style="enable-background:new 0 0 451 451;" xml:space="preserve" width="20px" height="20px">
                   <g>
                      <g>
                         <path d="M447.05,428l-109.6-109.6c29.4-33.8,47.2-77.9,47.2-126.1C384.65,86.2,298.35,0,192.35,0C86.25,0,0.05,86.3,0.05,192.3   s86.3,192.3,192.3,192.3c48.2,0,92.3-17.8,126.1-47.2L428.05,447c2.6,2.6,6.1,4,9.5,4s6.9-1.3,9.5-4   C452.25,441.8,452.25,433.2,447.05,428z M26.95,192.3c0-91.2,74.2-165.3,165.3-165.3c91.2,0,165.3,74.2,165.3,165.3   s-74.1,165.4-165.3,165.4C101.15,357.7,26.95,283.5,26.95,192.3z" data-original="#000000" class="active-path" data-old_color="#ff3300" fill="#ff3300"/>
                      </g>
                   </g>
                </svg>
            </button>
        </form>
        <div class="arrow-left"></div>
    </div>
      <nav class="main-nav float-right d-none d-lg-block">
        <ul style="float: right;">
            <li class="nav-item"><a class="nav-link" href="/index.html">Home</a></li>
          <!-- <li><a href="#">Demo</a></li> -->
          <li class="nav-item profile-nav-dd">
            <!-- <i class="far fa-user-circle"></i> -->
            <a class="nav-link dropdown-toggle" href="#" data-toggle="dropdown">
                <!-- <img src="images/user-avatar.png" alt="User avatar" data-user-avatar-image="4"> -->
                <span class="user-name">
                    Người dùng
                </span>
            </a>
            <div class="dropdown-menu scale-up-tr" style="display: none; margin-top: 0 !important;">
                <a class="dropdown-item" href="/index.html">
                    <span>Trang chủ</span>
                </a>
                <a class="dropdown-item" href="/hoSo.html">
                    <span>Hồ sơ của tôi</span>
                </a>
                <a class="dropdown-item" href="/Quanlysach/sachcuatoi.html" class="btn btn-primary" data-toggle="modal" data-target="#specifications">
                    <span>Sách của tôi</span>
                </a>
                <a class="dropdown-item" href="/Quanlysach/themsach.html">
                    <span>Thêm sách mới</span>
                </a>
                <hr>
                <a class="dropdown-item" href="/caidattaikhoan.html">
                    <span>Cài đặt tài khoản</span>
                </a>
                <a class="dropdown-item" href="Help.html">
                    <span>Trợ giúp</span>
                </a>
                <hr>
                <a class="dropdown-item" href="/index(chua dang nhap).html">
                    <span>Đăng xuất</span>
                </a>
            </div>
        </li>
        </ul>
      </nav><!-- .main-nav -->
  
    </div>
  </header><!-- #header -->


<!-- form thêm sách -->




<section class="content" data-storepage="add_product" style="margin: 50px 50px 0 50px;">
    <div class="clearfix data-management-page" id="product-upsert-page">
        <div class="clearfix">
            <div class="affixed-page-section">
                <div class="affixed-page-part-1" id="affixed-page-part">
                    <form data-prod-id="19" class="clearfix form-horizontal product-upsert-form" id="product-upsert-form">
                        <input type="hidden" class="hidden d-none" name="hash" value="1606360196:f148ceee33a52e839b0dfea3393bf0a507d46855">
                        <div class="card">
                            <div class="header">
                                <h2>Thêm sách</h2>
                            </div>
                            <div class="body">
                                <div class="data-management-area">
                                    <div class="form-fieldset-title clearfix" data-affix-label="prod_basic_info">
                                        <div class="row">
                                            <div class="col-sm-12">
                                                <p>Vui lòng điền thông tin chi tiết về sách</p>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Tên sách -->
                                    <div class="form-group form-field-box">
                                        <div class="row clearfix">
                                            <div class="col-sm-12" data-form-field="3">
                                                <label class="form-label">Tên sách</label>
                                                <div class="filed-box">
                                                    <input name="name" type="text" class="form-control" placeholder="Tên sách. Ví dụ. Nhà giả kim v.v...">
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <!-- Tình trạng sách -->
                                    <div class="form-group form-field-box">
                                        <div class="row clearfix">
                                            <div class="col-sm-12" data-form-field="5">
                                                <label class="form-label">Thể loại sách</label>
                                                <div class="filed-box">
                                                    <select name="condition" class="form-control">
                                                        <option value="tieuthuyet">Tiểu thuyết</option>
                                                        <option value="khoahoc">Khoa học</option>
                                                        <option value="triethoc">Triết học</option>
                                                        <option value="tieuthuyet">Tiểu thuyết</option>
                                                        <option value="tieuthuyet">Tiểu thuyết</option>
                                                        <option value="tieuthuyet">Tiểu thuyết</option>
                                                        <option value="tieuthuyet">Tiểu thuyết</option>
                                                        <option value="tieuthuyet">Tiểu thuyết</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                           <div class="form-group form-field-box">
                                            <div class="row clearfix">
                                                <div class="col-sm-6 p-r-10" data-form-field="13">
                                                    <label class="form-label">
                                                        Tên tác giả
                                                    </label>
                                                    <div class="filed-box">
                                                        <input name="origin" type="text" class="form-control" placeholder="Nhập tên tác giả">
                                                    </div>
                                                </div>
                                                <div class="col-sm-6 p-l-10" data-form-field="14">
                                                    <label class="form-label">
                                                        Tái bản
                                                    </label>
                                                    <div class="filed-box">
                                                        <input name="brand" type="text" class="form-control" placeholder="Tái bản lần thứ n">
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    <!-- Mô tả chi tiết về sách -->
                                    <div class="form-group form-field-box">
                                        <div class="row clearfix">
                                            <div class="col-sm-12 no-mb" data-form-field="6">
                                                <label class="form-label">Mô tả chi tiết về sách</label>
                                                <div class="filed-box">
                                                    <textarea name="description" rows="5" class="form-control" id="product-description" placeholder="Nhập mô tả chi tiết về tình trạng sách hoặc giới thiệu sơ về nội dung..."></textarea>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <hr>
                                    <div class="form-fieldset-title clearfix" data-affix-label="prod_images">
                                        <div class="row">
                                            <div class="col-sm-12"><p>Hình ảnh</p></div>
                                        </div>
                                    </div>
                                    <div class="form-group form-field-box">
                                        <div class="row clearfix">
                                            <div class="col-sm-12" data-form-field="20">
                                                <div class="filed-box">
                                                    <div class="prod-pickzone-wrapper">
                                                        <div class="left-part">
                                                            <div class="pick-zone" id="select-prod-poster">
                                                                <div class="pz-message">
                                                                    <div class="drag-icon-cph">
                                                                        <i class="material-icons">touch_app</i>
                                                                    </div>
                                                                    <h3>Nhấn vào đây để tải lên</h3>
                                                                    <small>Select poster image</small>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div> 
                                    <hr>
                                    <div class="form-group form-field-box" id="prod-additional-images-holder">
                                        <div class="row clearfix">
                                            <div class="col-sm-12 no-mb" data-form-field="21">
                                                <label class="form-label">
                                                    Hình ảnh
                                                </label>
                                                <div class="filed-box">
                                                    <div class="prod-images-dropzone" id="gallery-images-list">
                                                        <div class="product-images-item eq-height add-image" id="add-gallery-images">
                                                            <div class="inner-cont">
                                                                <i class="material-icons">add_to_photos</i>
                                                            </div>
                                                        </div>
                                                    </div>
                                                    <small class="col-cyan sub-title">Thêm hình ảnh bộ sưu tập sản phẩm. <i class="material-icons">info</i> Lưu ý: Sản phẩm có hình ảnh tốt và rõ ràng được bán nhanh hơn!</small>
                                                    <template id="product-images-item-temp">
                                                        <div class="product-images-item eq-height image-preview filled">
                                                            <div class="image">
                                                                <img src="" alt="Image">
                                                                <span class="delete-image">
                                                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path d="M405 136.798L375.202 107 256 226.202 136.798 107 107 136.798 226.202 256 107 375.202 136.798 405 256 285.798 375.202 405 405 375.202 285.798 256z"></path></svg>
                                                            </span>
                                                            </div>
                                                        </div>
                                                    </template>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="affixed-page-part-2" id="right-sidepart">
                                        <div class="sidebar__inner">
                                            <div class="card">
                                                <div class="body">
                                                    <div class="ctrls">
                                                        <button class="btn btn-lg bg-main-red" data-main-btn="submit" title="Thêm sách"style="color: #ffffff;background:#004a99">
                                                            <i class="material-icons">add_circle_outline</i> <span class="btn-text">Thêm sách</span>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
               
            </div>
        </div>
    </div>
</section>
<!-- end form thêm sách -->
<script>
    $(window).load(function(){
        "use strict";

        var P_UPSERT_FM = $("form#product-upsert-form");
        var P_AI_H = P_UPSERT_FM.find('div#prod-additional-images-holder');
        eqheight(".eq-height");
    });

    jQuery(document).ready(function($) {
        "use strict";

        var PROD_UPSERT_PAGE = $("div#product-upsert-page");
        var P_UPSERT_FM      = PROD_UPSERT_PAGE.find("form#product-upsert-form");

        P_UPSERT_FM.find('div#select-prod-poster').on('click',function(event) {
            event.preventDefault();
            PROD_UPSERT_PAGE.find("form#upload-product-poster").find('input[type="file"]').trigger('click');
        });

        PROD_UPSERT_PAGE.find("form#upload-product-poster").ajaxForm({
            url: 'https://localhost/Web-raovat/req/products/upload_poster',
            type: 'POST',
            dataType: 'json',
            data:{prod_id: '19'},
            beforeSend: function() {
                $('div[data-dom-node="long_proc_preloader"]').removeClass('hidden');
            },
            success: function(data) {
                if (data.status == 200) {
                    P_UPSERT_FM.find('div#select-prod-poster').html($("<img>",{
                        src: data.url,
                        alt: 'Image'
                    }));
                }
                else {
                    if (data.message) {
                        $.notify({
                            message: data.message,
                        },{
                            allow_dismiss: false,icon_type: "class",type: 'default',timer: 500,
                            placement: {from: "bottom",align: "left"},
                            offset: {x: 40,y: 30},
                            animate: {enter: 'animated fadeInUp',exit: 'animated fadeOutDown'}
                        });
                    }
                }
            },
            complete: function() {
                delay(function() {
                    $('div[data-dom-node="long_proc_preloader"]').addClass('hidden');
                },300);
            }
        });

        P_UPSERT_FM.find('select#select-prod-shipcost').on('change',function(event) {
            event.preventDefault();
            var this_el   = $(this);
            var ship_cost = $(this).val();

            if (hs_in_array(ship_cost,['free','paid'])) {
                if (ship_cost == 'paid') {
                    P_UPSERT_FM.find('input#shipping-fee-amount').removeAttr('disabled');
                }

                else {
                    P_UPSERT_FM.find('input#shipping-fee-amount').attr('disabled', 'true');
                    P_UPSERT_FM.find('input#shipping-fee-amount').val('');
                }
            }
            else{
                $(window).reloadPage(100);
                return false;
            }
        });

        P_UPSERT_FM.find('div#add-gallery-images').on('click',function(event) {
            event.preventDefault();
            PROD_UPSERT_PAGE.find("form#upload-gallery-images").find('input[type="file"]').trigger('click');
        });

        PROD_UPSERT_PAGE.find("form#upload-gallery-images").ajaxForm({
            url: 'https://localhost/Web-raovat/req/products/additional_image',
            type: 'POST',
            dataType: 'json',
            beforeSend: function() {
                P_UPSERT_FM.find('[data-form-field="21"]').find('small.sub-title-error').remove();
                $('div[data-dom-node="long_proc_preloader"]').removeClass('hidden');
            },
            success: function(data) {
                if (data.status == 200) {
                    var filled_images   = P_UPSERT_FM.find('div.filled.image-preview');
                    var image_item_temp = P_UPSERT_FM.find('template#product-images-item-temp').html();
                    var image_item      = $(image_item_temp);
                    image_item.find('img').attr('src', data.url);
                    image_item.attr('data-gallery-media-id', data.id);
                    image_item.find('span').attr('data-delete-data', 'gallery_image');
                    P_UPSERT_FM.find('div#gallery-images-list').prepend(image_item);
                }

                else {
                    if (data.message) {
                        $.notify({
                            message: data.message,
                        },{
                            allow_dismiss: false,icon_type: "class",type: 'default',timer: 500,
                            placement: {from: "bottom",align: "left"},
                            offset: {x: 40,y: 30},
                            animate: {enter: 'animated fadeInUp',exit: 'animated fadeOutDown'}
                        });
                    }
                }
            },
            complete: function() {
                delay(function() {
                    $('div[data-dom-node="long_proc_preloader"]').addClass('hidden');
                },300);
            }
        });

        PROD_UPSERT_PAGE.find('button[data-main-btn="submit"]').on('click', function(event) {
            event.preventDefault();
            P_UPSERT_FM.submit();
        });

        P_UPSERT_FM.ajaxForm({
            url: 'https://localhost/Web-raovat/req/products/prod_upsert',
            type: 'POST',
            dataType: 'json',
            beforeSend: function() {
                P_UPSERT_FM.find('div.filed-box').each(function(index, el) {
                    $(el).removeClass('error');
                }); P_UPSERT_FM.find('small.error-message').remove();

                PROD_UPSERT_PAGE.find('button[data-main-btn="submit"]').attr('disabled',true);
                PROD_UPSERT_PAGE.find('button[data-main-btn="submit"]').find('span').text("Xin vui lòng chờ");
            },
            success: function(data) {
                if (data.status == 200) {
                    $.notify({
                        message: data.message,
                    },{
                        allow_dismiss: false,icon_type: "class",type: 'default',timer: 500,
                        placement: {from: "bottom",align: "left"},
                        offset: {x: 40,y: 30},
                        animate: {enter: 'animated fadeInUp',exit: 'animated fadeOutDown'}
                    });

                    delay(function(){
                        hs_redirect(data.url);
                    },2000);
                }

                else {
                    delay(function() {
                        PROD_UPSERT_PAGE.find('button[data-main-btn="submit"]').removeAttr('disabled');
                        PROD_UPSERT_PAGE.find('button[data-main-btn="submit"]').find('span').text(
                            PROD_UPSERT_PAGE.find('button[data-main-btn="submit"]').attr('title')
                        );
                    },500);

                    if (data.err_code == 20) {
                        var invalid_field = P_UPSERT_FM.find('[data-form-field="20"]');
                        invalid_field.scroll2();
                        invalid_field.find('div.left-part').addClass('error');

                        if (invalid_field.find('small').length) {
                            invalid_field.find('small').text(data.message);
                            invalid_field.find('small').addClass('animated flash');
                        }
                        else {
                            $.notify({
                                message:data.message,
                            },{
                                allow_dismiss: false,icon_type: "class",type: 'default',timer: 500,
                                placement: {from: "bottom",align: "left"},
                                offset: {x: 40,y: 30},
                                animate: {enter: 'animated fadeInUp',exit: 'animated fadeOutDown'}
                            });
                        }
                    }

                    else if(data.err_code == 21) {
                        var invalid_field = P_UPSERT_FM.find('[data-form-field="21"]');
                        invalid_field.scroll2();
                        $('<small>',{
                            text: data.message,
                            class: 'col-red animated flash sub-title-error'
                        }).insertBefore(invalid_field.find('small.sub-title'));
                    }

                    else if(data.err_code == 22) {
                        var invalid_field = P_UPSERT_FM.find('[data-form-field="22"]').scroll2();
                        $.notify({
                            message:data.message,
                        },{
                            allow_dismiss: false,icon_type: "class",type: 'default',timer: 500,
                            placement: {from: "bottom",align: "left"},
                            offset: {x: 40,y: 30},
                            animate: {enter: 'animated fadeInUp',exit: 'animated fadeOutDown'}
                        });
                    }

                    else {
                        var invalid_field = P_UPSERT_FM.find('[data-form-field="{0}"]'.format(data.err_code));
                        if (invalid_field.length) {
                            invalid_field.scroll2();
                            if (invalid_field.find('div.filed-box').length) {
                                invalid_field.find('div.filed-box').addClass('error');
                                invalid_field.append($("<small>",{
                                    text: data.message,
                                    class: 'col-red animated flash error-message'
                                }));
                            }
                            else {
                                $.notify({
                                    message:data.message,
                                },{
                                    allow_dismiss: false,icon_type: "class",type: 'default',timer: 500,
                                    placement: {from: "bottom",align: "left"},
                                    offset: {x: 40,y: 30},
                                    animate: {enter: 'animated fadeInUp',exit: 'animated fadeOutDown'}
                                });
                            }
                        }
                        else {
                            $.notify({
                                message:data.message,
                            },{
                                allow_dismiss: false,icon_type: "class",type: 'default',timer: 500,
                                placement: {from: "bottom",align: "left"},
                                offset: {x: 40,y: 30},
                                animate: {enter: 'animated fadeInUp',exit: 'animated fadeOutDown'}
                            });
                        }
                    }
                }
            }
        });

        P_UPSERT_FM.find('select#prodvar-types').on('change',function(event) {
            event.preventDefault();
            var var_type = $(this).val();
            var zis_elem = $(this);
            $('div[data-dom-node="long_proc_preloader"]').removeClass('hidden');
            $.ajax({
                url: 'https://localhost/Web-raovat/req/products/set_vartype',
                type: 'POST',
                dataType: 'json',
                data: {prod_id: '19',var_type:var_type},
            }).done(function(data) {
                if (data.status == 200) {
                    if(hs_in_array(var_type,['color','size','color_size'])){
                        P_UPSERT_FM.find('div#add-prodvar').removeClass('hidden');

                        if (hs_in_array(var_type,['size','color_size'])) {
                            P_UPSERT_FM.find('div#prod-sizing-types').removeClass('hidden');
                        }

                        else {
                            P_UPSERT_FM.find('div#prod-sizing-types').addClass('hidden');
                        }
                    }

                    else {

                        if (hs_in_array(var_type,['size','color_size']) != true) {
                            P_UPSERT_FM.find('div#prod-sizing-types').addClass('hidden');
                        }

                        P_UPSERT_FM.find('div#add-prodvar').addClass('hidden');
                    }
                }
                else {
                    if (data.message) {
                        zis_elem.val(data.pvt);
                        zis_elem.selectpicker('refresh');
                        $.notify({
                            message: data.message,
                        },{
                            allow_dismiss: false,icon_type: "class",type: 'default',timer: 500,
                            placement: {from: "bottom",align: "left"},
                            offset: {x: 40,y: 30},
                            animate: {enter: 'animated fadeInUp',exit: 'animated fadeOutDown'}
                        });
                    }
                }
            }).always(function() {
                delay(function() {
                    $('div[data-dom-node="long_proc_preloader"]').addClass('hidden');
                },300);
            });
        });

        P_UPSERT_FM.find('div#prod-sizing-types').find('select').on('change',function(event) {
            event.preventDefault();
            var sizing_type = $(this).val();
            var zis_elem    = $(this);

            $('div[data-dom-node="long_proc_preloader"]').removeClass('hidden');
            $.ajax({
                url: 'https://localhost/Web-raovat/req/products/set_sizing_type',
                type: 'POST',
                dataType: 'json',
                data: {prod_id: '19',type: sizing_type},
            }).done(function(data) {
                if (data.status != 200) {
                    zis_elem.val(data.pst);
                    zis_elem.selectpicker('refresh');
                    $.notify({
                        message: data.message,
                    },{
                        allow_dismiss: false,icon_type: "class",type: 'default',timer: 500,
                        placement: {from: "bottom",align: "left"},
                        offset: {x: 40,y: 30},
                        animate: {enter: 'animated fadeInUp',exit: 'animated fadeOutDown'}
                    });
                }
            }).always(function() {
                delay(function(){
                    $('div[data-dom-node="long_proc_preloader"]').addClass('hidden');
                },300);
            });
        });

        P_UPSERT_FM.find('button#add-prodvar-btn').on('click',function(event) {
            event.preventDefault();
            var var_type = P_UPSERT_FM.find('select#prodvar-types').val();
            var zis_elem = $(this);
            if(hs_in_array(var_type,['color','size','color_size'])) {
                if (hs_in_array(var_type,['size','color_size'])) {
                    var prod_sizing_type = P_UPSERT_FM.find('select#sizing-types').val();
                    if (hs_empty(prod_sizing_type)) {
                        $.notify({
                            message: "Vui lòng chọn loại kích cỡ sản phẩm trước khi thêm biến thể sản phẩm!",
                        },{
                            allow_dismiss: false,icon_type: "class",type: 'default',timer: 500,
                            placement: {from: "bottom",align: "left"},
                            offset: {x: 40,y: 30},
                            animate: {enter: 'animated fadeInUp',exit: 'animated fadeOutDown'}
                        });
                        return false;
                    }
                }

                $.ajax({
                    url: 'https://localhost/Web-raovat/req/products/lp',
                    type: 'GET',
                    dataType: 'json',
                    data: {
                        page: 'var_addon_form',
                        type: var_type,
                    },
                    beforeSend: function () {
                        zis_elem.find('span').text("Xin vui lòng chờ");
                        zis_elem.attr('disabled',true);
                    }
                }).done(function(data) {
                    if (data.status == 200) {
                        $(data.html).appendTo('body');
                        $('body').find('div.product-upsertvar-modal').modal('show');
                    }

                    else {
                        if (data.message) {
                            $.notify({
                                message: data.message,
                            },{
                                allow_dismiss: false,icon_type: "class",type: 'default',timer: 500,
                                placement: {from: "bottom",align: "left"},
                                offset: {x: 40,y: 30},
                                animate: {enter: 'animated fadeInUp',exit: 'animated fadeOutDown'}
                            });
                        }
                    }
                }).always(function function_name(argument) {
                    zis_elem.find('span').text(zis_elem.attr('title'));
                    zis_elem.removeAttr('disabled');
                });
            }
        });

        P_UPSERT_FM.find('button#show-prodvar-btn').on('click',function(event) {
            event.preventDefault();
            var this_el = $(this);
            $.ajax({
                url: 'https://localhost/Web-raovat/req/products/lp',
                type: 'GET',
                dataType: 'json',
                data: {
                    page: 'product_variations_list',
                },
                beforeSend: function () {
                    this_el.find('span').text("Xin vui lòng chờ");
                    this_el.attr('disabled',true);
                }
            }).done(function(data) {
                if (data.status == 200) {
                    $(data.html).appendTo('body');
                    $('body').find('div.modal.product-vars-list-modal').modal('show');
                }
                else {
                    if (data.error) {
                        $.notify({
                            message: data.error,
                        },{
                            allow_dismiss: false,icon_type: "class",type: 'default',timer: 500,
                            placement: {from: "bottom",align: "left"},
                            offset: {x: 40,y: 30},
                            animate: {enter: 'animated fadeInUp',exit: 'animated fadeOutDown'}
                        });
                    }
                }
            }).always(function() {
                this_el.find('span').text(this_el.attr('title'));
                this_el.removeAttr('disabled');
            });
        });

        $(document).on('click', '[data-delete-data]', function(event) {
            event.preventDefault();
            var deleted_data = $(this).data('delete-data');
            var this_el      = $(this);

            if (deleted_data == 'gallery_image') {
                if (this_el.hasClass('deleted') != true) {
                    var id = $(this).closest('div.image-preview').data('gallery-media-id');
                    this_el.addClass('deleted');
                    if ($.isNumeric(id)) {
                        $.ajax({
                            url: 'https://localhost/Web-raovat/req/products/remove_gallery_image',
                            type: 'POST',
                            dataType: 'json',
                            data: {image_id: id,prod_id:'19'},
                        }).done(function(data) {
                            if (data.status == 200) {
                                P_UPSERT_FM.find('[data-gallery-media-id="{0}"]'.format(id)).fadeOut(150, function() {
                                    $(this).remove();
                                });
                            }
                        });
                    }
                }
            }

            else if(deleted_data == 'product_variant_item') {
                var PD_VARLIST_M = $("div#product-varslist-modal");
                var var_id       = this_el.data('id');

                $.ajax({
                    url: 'https://localhost/Web-raovat/req/products/delete_prod_var',
                    type: 'POST',
                    dataType: 'json',
                    data: {id: var_id},
                    beforeSend: function() {
                        PD_VARLIST_M.find('button').attr('disabled', 'true');
                    }
                }).done(function(data) {
                    if (data.status == 200) {
                        PD_VARLIST_M.find('span#vars-total').text(data.total);
                        P_UPSERT_FM.find('button#show-prodvar-btn').find('b').text(data.total);

                        PD_VARLIST_M.find('tr[data-var-row="{0}"]'.format(var_id)).slideUp(150,function(){
                            $(this).remove();
                        });

                        if (hs_empty(data.total)) {
                            PD_VARLIST_M.modal('hide');
                            P_UPSERT_FM.find('button#show-prodvar-btn').attr('disabled',true);
                        }
                    }
                    else {
                        PD_VARLIST_M.modal('hide');
                        $.notify({
                            message: data.message,
                        },{
                            allow_dismiss: false,icon_type: "class",type: 'default',timer: 500,
                            placement: {from: "bottom",align: "left"},
                            offset: {x: 40,y: 30},
                            animate: {enter: 'animated fadeInUp',exit: 'animated fadeOutDown'}
                        });
                    }
                }).always(function(){
                    PD_VARLIST_M.find('button').removeAttr('disabled');
                });
            }
        });

        $(document).on('click', '[data-onclick]', function(event) {
            event.preventDefault();
            var this_el       = $(this);
            var event_trigger = this_el.data('onclick');

            if (event_trigger == 'edit_var_item') {
                if (this_el.hasClass('deleted') != true) {
                    var id = this_el.data('id');
                    if ($.isNumeric(id)) {
                        $.ajax({
                            url: 'https://localhost/Web-raovat/req/products/lp',
                            type: 'GET',
                            dataType: 'json',
                            data: {
                                prod_id: '19',
                                var_id: id,
                                page: 'edit_var_item',
                            },
                        }).done(function(data) {
                            if (data.status == 200) {
                                delay(function(){
                                    $('body').append($(data.html).modal('show')).addClass('modal-open');
                                },300);
                            }

                            else {
                                if (data.message) {
                                    $.notify({
                                        message: data.message,
                                    },{
                                        allow_dismiss: false,icon_type: "class",type: 'default',timer: 500,
                                        placement: {from: "bottom",align: "left"},
                                        offset: {x: 40,y: 30},
                                        animate: {enter: 'animated fadeInUp',exit: 'animated fadeOutDown'}
                                    });
                                }
                            }
                        }).always(function() {
                            $('div#product-varslist-modal').modal('hide');
                        });
                    }

                    else {
                        return false;
                    }
                }
            }
        });

        PROD_UPSERT_PAGE.find('div#right-sidepart').stickySidebar({
            topSpacing: 130,
            bottomSpacing: 20,
            stickyClass: 'is-affixed'
        });

        PROD_UPSERT_PAGE.find('[data-affix-scroll]').on('click', function(event) {
            event.preventDefault();
            var this_el = $(this);
            var label   = this_el.data('affix-scroll');
            if (label && PROD_UPSERT_PAGE.find('[data-affix-label="{0}"]'.format(label)).length) {
                PROD_UPSERT_PAGE.find('[data-affix-label="{0}"]'.format(label)).scroll2(200,125);
                this_el.addClass('active');
                this_el.siblings('li.list-group-item').removeClass('active');
            }
        });
    });
</script><div class="long-process-preloader-wrapper hidden" data-dom-node="long_proc_preloader">
<div class="preloader-inner">
    <div class="data-preloader">
        <div class="loading">
            <div class="lds-ellipsis"><div></div><div></div><div></div><div></div></div>
        </div>
    </div>	</div>
</div>

</section>
<script>
jQuery(document).ready(function($) {
    "use strict";

    var curr_store_page = $("section.content").data('storepage');
    if ($('li[data-nav-list-item="{0}"]'.format(curr_store_page)).length) {

        if ($('li[data-nav-list-item="{0}"]'.format(curr_store_page)).hasClass('mml')) {
            $('li[data-nav-list-item="{0}"]'.format(curr_store_page)).addClass('active');
        }

        else{
            $('li[data-nav-list-item="{0}"]'.format(curr_store_page)).addClass('active').parents('li.mtl').addClass('active').find('a.menu-toggle').addClass('toggled');
        }
    }
});
</script>
</body>
</html>
